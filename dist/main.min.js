/*!
 * @autots/floornav v0.0.1
 * Last Modified @ 2021/7/29下午8:00:57
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Floornav=e():(t.AutoTs=t.AutoTs||{},t.AutoTs.Floornav=e())}(this,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e){t.exports=require("@babel/runtime/helpers/classCallCheck")},function(t,e){t.exports=require("@babel/runtime/helpers/createClass")},function(t,e,n){"use strict";n.r(e);var i=n(1),o=n.n(i),s=n(0),r=n.n(s),c=function t(){r()(this,t),this.container=window,this.base="center",this.threshold=0,this.scrollOffset=0,this.activeClass="active",this.showClass="show",this.isToggleShow=!0},a=function(){function t(e,n){var i=this;r()(this,t),this.floorItmes=[],this.defaultConfig=new c,this._fnCheck=function(){i._check()},this.id=e,this.defaultConfig=new c,this.config=Object.assign(Object.assign({},this.defaultConfig),n);var o=document.getElementById(this.id);this.navContainerEl=o,this.navItems=this.id?document.querySelectorAll("#".concat(this.id," a[href]")):null,window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(t,e){e=e||window;for(var n=0;n<this.length;n++)t.call(e,this[n],n,this)}),this.update=function(){i._initItems(),i.init()},this.init()}return o()(t,[{key:"init",value:function(){this.navContainerEl?(this._initItems(),this._initJump(),this._initCheck(),this._check()):console.warn("[Floornav warning]: can't find the wrapper element of the floor navigation")}},{key:"_initItems",value:function(){var t=this;this.floorItmes=[],this.navItems&&this.navItems.forEach((function(e){var n=e.getAttribute("href");if(n){var i=document.getElementById(n.slice(1));t.floorItmes.push(i)}}))}},{key:"_setItemActive",value:function(t){var e=this.config,n=e.activeClass,i=void 0===n?"active":n,o=e.onNavChange,s=document.querySelector("#".concat(this.id," a.").concat(i,"[href]"));s&&s.classList.remove(i),t.classList.add(i),o&&o(t)}},{key:"_check",value:function(){var t,e=this,n=this.config,i=n.threshold,o=n.base,s=n.container,r=s.innerHeight,c=0;if(s!==window){var a=document.getElementById(s);c=a?a.getBoundingClientRect().top:0}if(t="top"===o?c:"bottom"===o?c+r:c+r/2,this.config.isToggleShow){var l=this.floorItmes[0];l&&l.getBoundingClientRect().top<=t+i?(this.navContainerEl&&(this.navContainerEl.style.display="block"),setTimeout((function(){e.navContainerEl&&e.navContainerEl.classList.add("show")}),0)):(this.navContainerEl&&(this.navContainerEl.style.display="none"),this.navContainerEl&&this.navContainerEl.classList.remove("show"))}else this.navContainerEl&&(this.navContainerEl.style.display="block"),this.navContainerEl&&this.navContainerEl.classList.add("show");for(var u=this.floorItmes.length-1;u>=0;u--){var f=this.floorItmes[u];if(f&&f.getBoundingClientRect().top<=t+i+1){var h=f.getAttribute("id"),d=document.querySelector("#".concat(this.id,' a[href="#').concat(h,'"]'));d&&!d.classList.contains("".concat(this.config.activeClass))&&this._setItemActive(d);break}}}},{key:"_initJump",value:function(){var t=this,e=this.config,n=e.container,i=e.scrollOffset,o=e.scrollTime;this.navItems&&this.navItems.forEach((function(e){e.addEventListener("click",(function(s){(s||window.event).preventDefault();var r=e;if(r){var c,a=r.getAttribute("href");a&&(c=document.getElementById(a.slice(1))),t._setItemActive(r);var l=0;if(n!==window)l=n.getBoundingClientRect().top+((window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0))-n.scrollTop;if(c){var u=c.getBoundingClientRect().top+((window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0))-(i||0)-l;t._scrollTo(c,u,o)}}}))}))}},{key:"_initCheck",value:function(){this.config.container.addEventListener("scroll",this._fnCheck),this.config.container.addEventListener("resize",this._fnCheck)}},{key:"_scrollTo",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300;if(t){var o=this.config.container;o.removeEventListener("scroll",this._fnCheck),o.removeEventListener("resize",this._fnCheck);var s=document.documentElement.scrollTop||document.body.scrollTop,r=0,c=5;i/=c;var a=setInterval((function(){r++;var t=(e-s)/i*r+s;document.documentElement.scrollTop=document.body.scrollTop=t,r>=i&&(clearInterval(a),setTimeout((function(){n._initCheck()}),20))}),c)}}},{key:"destroy",value:function(){this.config.container.removeEventListener("scroll",this._fnCheck),this.config.container.removeEventListener("resize",this._fnCheck)}}]),t}();e.default=a}]).default}));